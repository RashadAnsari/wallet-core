#!/usr/bin/env node

const appAsync = require('../src/app');
const cfg = require('../src/cfg');
const http = require('http');

function onError(error) {
  throw error;
}

function onListening() {
  console.log(`Listening on port: ${cfg.port}`);
}

appAsync().then((app) => {
  app.set('port', cfg.port);
  var server = http.createServer(app);
  server.listen(cfg.port);

  server.on('error', onError);
  server.on('listening', onListening);
});
